<html>
<head>
	<title>忍法列表</title>
	<link rel="stylesheet" href="./css/global.css">
	<link rel="stylesheet" href="./css/info-card.css">
	<link rel="stylesheet" href="./css/info-card-ninpo.css">
	<script src="./js/config/custom.js"></script>
	<script src="./js/basic/jquery-3.6.0.min.js"></script>
	<script src="./js/basic/authenticator.js"></script>
	<script src="./js/basic/utils.js"></script>
	<script src="./js/basic/navbar.js"></script>
	<script src="./js/basic/mySearcher.js"></script>
	<script src="./js/basic/mySearcherBuilder.js"></script>
	<script src="./data/ninpo-list.js"></script>
	<script src="./js/ninpo-searcher.js"></script>
	<script src="./js/ninpo-parser.js"></script>

	<style>
		#storageContainer{
			background:#884C3A;
			padding: 10px 0;
		}
		#storageContainer .container_title {
			background: #5c0000;
			color:white;
			margin:0 5px;
			padding:5px 10px;
			font-weight:bold;
		}
		#storageContainer .container_title:after {
			content: "(雙擊忍法以加入/移除忍法倉庫)";
			margin: 0 5px;
			font-size: 10px;
			font-weight:normal;
		}
	</style>
	<script>
var NinpoSearcherCtrl; //from "js/ninpo-searcher.js"

function init(){
	NinpoSearcherCtrl.Build("SearchPanel");
	NinpoSearcherCtrl.SetPrintFunc(printResult);
	NinpoSearcherCtrl.Search();
}
function printResult(){
	var list = NinpoSearcherCtrl.GetResult();
	var mode = NinpoSearcherCtrl.GetDisplayMode();

	var container = $('#ItemContainer .Page');
	container.empty();
	for(var ninpoObj of list){
		var ninpoElem = $(parseNinpo(ninpoObj, mode)).appendTo('#ItemContainer .Page').get(0);
		ninpoElem.ondblclick = storeNinpo.bind(null, ninpoObj);
	}
}
function storeNinpo(ninpoObj){
	var ninpoElem = $(parseNinpo(ninpoObj, 'list')).appendTo('#storageContainer').get(0);
	ninpoElem.ondblclick = removeNinpo.bind(null, ninpoElem);
}
function removeNinpo(selfObj){
	$(selfObj).remove();
}

window.onload = function(){
	init();
}
	</script>
</head>
<body>
	<div id="FrameTitle">忍神秘傳卷集 - 忍法列表</div>
	<div id="FrameOuter">
		<div id="FrameNavbar"><div id="navbar"></div></div>
		<div id="FrameContent">
			<div id="FrameContentHeader"><div id="SearchPanel"></div></div>
	
			<div id="storageContainer" class="container">
				<span class="container_title">忍法倉庫</span>
			</div>

			<div id="ItemContainer">
				<div class="Page List"></div>
			</div>
		</div>
	</div>
</body>
</html>